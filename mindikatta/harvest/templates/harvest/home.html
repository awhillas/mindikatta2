{% extends "base.html" %}
{% load harvest_tags %}
{% load humanize %}

{% block content %}

{% if perms.harvest.view_weighings_reports %}

<!-- Nav tabs -->
<ul class="nav nav-tabs" role="tablist">
	<li class="nav-item">
		<a class="nav-link {% if not farm_id %}active{% endif %}" href="{% url 'harvest:home'%}">All</a>
	</li>
	{% for farm in farms %}
		<li class="nav-item">
			<a
				class="nav-link {% if farm == farm_id %}active{% endif %}"
				href="{% url 'harvest:reports' farm=farm.id %}">
				{{ farm.name }}
			</a>
		</li>
	{% endfor %}
</ul>

	<h1>Summary, {{latest_year}}</h1>

	<h2>Operations</h2>

	<table class="table table-responsive table-striped">
		<thead>
			<th></th>
			{% for month in operations_summary.keys  %}
				<th>{{ month }}</th>
			{% endfor %}
		</thead>
		<tbody>
			{% for op in operations_summary.index %}
			<tr>
				<td>{{ op }}</td>
				{% for month in operations_summary  %}
					<td>
						{{ operations_summary.month }}
						{{ operations_summary.to_dict | get_item:month | get_item:op | intcomma }}
					</td>
				{% endfor %}
			</tr>
			{% endfor %}
		</tbody>
	</table>

	<h2>Blocks / Varietys</h2>

	<div class="card">
		<div class="card-body">
			<h5 class="card-title">
					Dehusk
			</h5>
			<div class="card-block">
				{% include "harvest/_table_weight_summary.html" with summary=block_summary_dehusk Xaxis=month_names Yaxis=blocks %}
			</div>
		</div>
	</div>

	<div class="card">
		<div class="card-body">
			<h5 class="card-title">
					Resort
			</h5>
			<div class="card-block">
				{% include "harvest/_table_weight_summary.html" with summary=block_summary_resort Xaxis=month_names Yaxis=blocks %}
			</div>
		</div>
	</div>


	<div class="card">
		<div class="card-body">
			<h5 class="card-title">
					Sales
			</h5>
			<div class="card-block">
				{% include "harvest/_table_weight_summary.html" with summary=block_summary_resort Xaxis=month_names Yaxis=blocks %}
			</div>
		</div>
	</div>


{% endif %}

{% endblock %}
